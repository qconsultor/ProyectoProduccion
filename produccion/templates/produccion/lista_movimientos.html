{% extends 'produccion/base.html' %}

{% block title %}Consulta de Movimientos de Inventario{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="col-lg-10 col-xl-9">
        <h1 class="h3 m-0">Consulta de Movimientos de Inventario</h1>
    </div>

    <!-- ===== INICIO DE LA CORRECCIÓN DE ANCHO ===== -->
    <div class="row">
        <div class="col-lg-10 col-xl-9"> <!-- Limita el ancho en pantallas grandes -->

            <!-- SECCIÓN DE FILTROS -->
            <div class="card shadow-sm mb-4">
                <div class="card-body d-flex flex-wrap gap-2">
                    <a href="{% url 'lista_movimientos' %}" 
                       class="btn {% if not tipo_seleccionado %}btn-primary{% else %}btn-outline-secondary{% endif %}">
                       Todos
                    </a>
                    {% for tipo in tipos_documento %}
                    <a href="{% url 'lista_movimientos' %}?tipo={{ tipo }}" 
                       class="btn {% if tipo == tipo_seleccionado %}btn-primary{% else %}btn-outline-secondary{% endif %}">
                       {{ tipo }}
                    </a>
                    {% endfor %}
                </div>
            </div>

            <!-- TABLA DE RESULTADOS -->
            <div class="card shadow-sm">
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>Documento</th>
                                <th>N° de Referencia</th>
                                <th>Fecha</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for movimiento in movimientos %}
                            <tr>
                                <td>{{ movimiento.tipo_documento }}</td>
                                <td>
                                    <a href="{% url 'detalle_movimiento' movimiento.tipo_documento|slugify movimiento.numero %}">
                                        <strong>{{ movimiento.numero }}</strong>
                                    </a>
                                </td>
                                <td>{{ movimiento.fecha|date:"Y-m-d h:i A" }}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="3" class="text-center py-4">
                                    No se encontraron movimientos con los filtros seleccionados.
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>
    <!-- ===== FIN DE LA CORRECCIÓN DE ANCHO ===== -->
</div>
{% endblock %}

